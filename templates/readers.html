<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Quáº£n lÃ½ thÆ° viá»‡n</title>
</head>
<body>

<!-- MENU -->
<div style="margin-bottom: 20px;">
    <a href="/">ğŸ“š Quáº£n lÃ½ sÃ¡ch</a> |
    <a href="/readers">ğŸ‘¤ Quáº£n lÃ½ Ä‘á»™c giáº£</a> |
    <a href="/borrows">ğŸ“– Quáº£n lÃ½ mÆ°á»£n â€“ tráº£</a> |
    <a href="/stats">ğŸ“Š Thá»‘ng kÃª</a>
    {% if session.get('user_id') %}
        ğŸ‘¤ Xin chÃ o, {{ session.get('username') }} |
        <a href="#" onclick="confirmLogout()">ğŸšª ÄÄƒng xuáº¥t</a>

    {% else %}
        <a href="/login">ğŸ” ÄÄƒng nháº­p</a> |
        <a href="/register">ğŸ“ ÄÄƒng kÃ½</a>
    {% endif %}   
</div>

<hr>
<p><strong>ğŸ“‚ Báº¡n Ä‘ang á»Ÿ:</strong> Quáº£n lÃ½ Ä‘á»™c giáº£</p>

<h1>ğŸ“š Quáº£n lÃ½ thÆ° viá»‡n</h1>

<h2>ThÃªm Ä‘á»™c giáº£ má»›i</h2>
<form method="POST" action="/add_reader">
    <input name="name" placeholder="Há» tÃªn" required>
    <input name="dob" type="date" required>
    <input name="email" type="email" placeholder="Email" required>
    <input name="phone" placeholder="Sá»‘ Ä‘iá»‡n thoáº¡i" required>
    <input name="address" placeholder="Äá»‹a chá»‰">
    <button type="submit">ThÃªm Ä‘á»™c giáº£</button>
</form>
<!-- Form tÃ¬m kiáº¿m Ä‘á»™c giáº£ -->
<h3>TÃ¬m kiáº¿m Ä‘á»™c giáº£</h3>
<form method="GET" action="/search_readers" style="margin-bottom: 15px;">
    <input type="text" name="q" placeholder="Nháº­p tÃªn hoáº·c ID Ä‘á»™c giáº£..." style="width: 300px;">
    <button type="submit">ğŸ” TÃ¬m</button>   
</form>
<!-- NÃºt quay láº¡i toÃ n bá»™ danh sÃ¡ch -->
<a href="/readers">â†©ï¸ Hiá»ƒn thá»‹ táº¥t cáº£ Ä‘á»™c giáº£</a>
<hr>

<h2>Danh sÃ¡ch Ä‘á»™c giáº£</h2>
<table border="1" cellpadding="5" cellspacing="0">
    <tr style="background-color: #f2f2f2;">
        <th>ID</th>
        <th>Há» tÃªn</th>
        <th>NgÃ y sinh</th>
        <th>Email</th>
        <th>SÄT</th>
        <th>Äá»‹a chá»‰</th>
        <th>NgÃ y Ä‘Äƒng kÃ½</th>
        <th>HÃ nh Ä‘á»™ng</th>
    </tr>
    {% for r in readers %}
    <tr>
        <td>{{ r[0] }}</td>
        <td>{{ r[1] }}</td>
        <td>{{ r[2] }}</td>
        <td>{{ r[3] }}</td>
        <td>{{ r[4] }}</td>
        <td>{{ r[5] }}</td>
        <td>{{ r[6] }}</td>
        <td>
            <a href="/edit_reader/{{ r[0] }}">âœï¸ Sá»­a</a> |
            <a href="/delete_reader/{{ r[0] }}" onclick="return confirm('XoÃ¡ Ä‘á»™c giáº£ nÃ y?')">ğŸ—‘ï¸ XoÃ¡</a>
        </td>
    </tr>
    {% endfor %}
</table>
<script>
function confirmLogout() {
    const confirmBox = document.createElement("div");
    confirmBox.style.position = "fixed";
    confirmBox.style.top = "50%";
    confirmBox.style.left = "50%";
    confirmBox.style.transform = "translate(-50%, -50%)";
    confirmBox.style.background = "#fff";
    confirmBox.style.border = "2px solid #16a34a";
    confirmBox.style.padding = "30px";
    confirmBox.style.borderRadius = "12px";
    confirmBox.style.boxShadow = "0 10px 30px rgba(0, 0, 0, 0.15)";
    confirmBox.style.zIndex = "9999";
    confirmBox.style.textAlign = "center";
    confirmBox.style.minWidth = "320px";
    confirmBox.innerHTML = `
        <p style="font-size: 16px; margin-bottom: 20px;">
            <span style="font-size: 20px;">âš ï¸</span> Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n Ä‘Äƒng xuáº¥t?
        </p>
        <div style="display: flex; justify-content: center; gap: 20px;">
            <button onclick="window.location.href='/logout'" 
                style="background-color: #10b981; color: white; padding: 10px 20px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                âœ… CÃ³
            </button>
            <button onclick="this.closest('div').parentElement.remove()" 
                style="background-color: #ef4444; color: white; padding: 10px 20px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                âŒ KhÃ´ng
            </button>
        </div>
    `;
    document.body.appendChild(confirmBox);
}
</script>


</body>
</html>
